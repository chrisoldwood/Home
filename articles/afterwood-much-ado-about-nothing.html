<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 12 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#21798E;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Cambria","serif";
	color:#2DA2BF;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#2DA2BF;}
h4
	{mso-style-link:"Heading 4 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#2DA2BF;
	font-style:italic;}
h5
	{mso-style-link:"Heading 5 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#16505E;
	font-weight:normal;}
h6
	{mso-style-link:"Heading 6 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#16505E;
	font-weight:normal;
	font-style:italic;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-link:"Heading 7 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#404040;
	font-style:italic;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{mso-style-link:"Heading 8 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#2DA2BF;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-link:"Heading 9 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#404040;
	font-style:italic;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";
	color:#2DA2BF;
	font-weight:bold;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#343434;
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#343434;
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#343434;
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#343434;
	letter-spacing:.25pt;}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{mso-style-link:"Subtitle Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	color:#2DA2BF;
	letter-spacing:.75pt;
	font-style:italic;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoQuote, li.MsoQuote, div.MsoQuote
	{mso-style-link:"Quote Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	color:black;
	font-style:italic;}
p.MsoIntenseQuote, li.MsoIntenseQuote, div.MsoIntenseQuote
	{mso-style-link:"Intense Quote Char";
	margin-top:10.0pt;
	margin-right:46.8pt;
	margin-bottom:14.0pt;
	margin-left:46.8pt;
	line-height:115%;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	color:#2DA2BF;
	font-weight:bold;
	font-style:italic;}
span.MsoSubtleEmphasis
	{color:gray;
	font-style:italic;}
span.MsoIntenseEmphasis
	{color:#2DA2BF;
	font-weight:bold;
	font-style:italic;}
span.MsoSubtleReference
	{font-variant:small-caps;
	color:#DA1F28;
	text-decoration:underline;}
span.MsoIntenseReference
	{font-variant:small-caps;
	color:#DA1F28;
	letter-spacing:.25pt;
	font-weight:bold;
	text-decoration:underline;}
span.MsoBookTitle
	{font-variant:small-caps;
	letter-spacing:.25pt;
	font-weight:bold;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#21798E;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Cambria","serif";
	color:#2DA2BF;
	font-weight:bold;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Cambria","serif";
	color:#343434;
	letter-spacing:.25pt;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Cambria","serif";
	color:#21798E;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Cambria","serif";
	color:#2DA2BF;
	font-weight:bold;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-link:"Heading 4";
	font-family:"Cambria","serif";
	color:#2DA2BF;
	font-weight:bold;
	font-style:italic;}
span.Heading5Char
	{mso-style-name:"Heading 5 Char";
	mso-style-link:"Heading 5";
	font-family:"Cambria","serif";
	color:#16505E;}
span.Heading6Char
	{mso-style-name:"Heading 6 Char";
	mso-style-link:"Heading 6";
	font-family:"Cambria","serif";
	color:#16505E;
	font-style:italic;}
span.Heading7Char
	{mso-style-name:"Heading 7 Char";
	mso-style-link:"Heading 7";
	font-family:"Cambria","serif";
	color:#404040;
	font-style:italic;}
span.Heading8Char
	{mso-style-name:"Heading 8 Char";
	mso-style-link:"Heading 8";
	font-family:"Cambria","serif";
	color:#2DA2BF;}
span.Heading9Char
	{mso-style-name:"Heading 9 Char";
	mso-style-link:"Heading 9";
	font-family:"Cambria","serif";
	color:#404040;
	font-style:italic;}
span.SubtitleChar
	{mso-style-name:"Subtitle Char";
	mso-style-link:Subtitle;
	font-family:"Cambria","serif";
	color:#2DA2BF;
	letter-spacing:.75pt;
	font-style:italic;}
span.QuoteChar
	{mso-style-name:"Quote Char";
	mso-style-link:Quote;
	color:black;
	font-style:italic;}
span.IntenseQuoteChar
	{mso-style-name:"Intense Quote Char";
	mso-style-link:"Intense Quote";
	color:#2DA2BF;
	font-weight:bold;
	font-style:italic;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;
	width: 600px;
	margin-left: auto;
	margin-right: auto;}
-->
</style>

</head>

<body lang=EN-GB link=blue vlink=purple>

<div class=WordSection1>

<div style='border:none;border-bottom:solid #2DA2BF 1.0pt;padding:0cm 0cm 4.0pt 0cm'>

<p class=MsoTitle><span lang=X-NONE>Afterwood</span></p>

</div>

<p class=MsoNormal>There is a classic puzzle that goes:</p>

<p class=MsoNormal style='margin-left:36.0pt'>The poor have it, the rich need
it, and if you eat it you’ll die. What is it?</p>

<p class=MsoNormal>If you haven’t come across this before and Google is out of
reach because you’re reading the printed edition going through a tunnel or an internet
blackspot, the answer is “nothing”. I think it would be fairly easy to come up
with a programming specific version of this particular puzzle as there appears
to be quite a few variants of “nothing” in our world, many of which seem to
occupy a significant amount of our time due to their cunning camouflaged
outfits.</p>

<p class=MsoNormal>It probably seems strange to us now but once upon a time
there was no zero. Essentially you had something which was countable or you had
nothing. There were no negative numbers either and nothing preceded one (no pun
intended, for once). I recently read <i>The Nothing that Is: A Natural History
of Zero</i> and it got me thinking about the ways we represent nothingness in
programming and the problems it causes.</p>

<p class=MsoNormal>Zero is almost certainly our “go to choice” for representing
a lack of something as it’s been with us since our early days of schooling and support
for integer values has also been around in programming pretty much since the
beginning too whether you’re using assembly or a high-level language. Even most
children could tell you “<span style='font-family:"Courier New"'>numApples = 0</span>”
means you don’t have any apples.</p>

<p class=MsoNormal>Where it starts to go astray is when we have to squeeze the
concept of “none” into a domain that doesn’t really support it because you are
no longer representing countable things. A classic example here is representing
dates where day zero represents some epoch like 1<sup>st</sup> January 1970 or
1<sup>st</sup> January 1900 and negative values stretch backwards in time. Here
every value in the domain represents a valid value and so if we want something
to accommodate the notion of “no value” we probably have to repurpose one or
other end of the spectrum, e.g. <span style='font-family:"Courier New"'>INT_MIN</span>
or <span style='font-family:"Courier New"'>INT_MAX</span>.</p>

<p class=MsoNormal>What about if we’re searching an array for some value or
object and there is nothing to be found? If our array starts at index 1 (e.g.
Visual Basic) we could use the value 0, but many languages have adopted the
0-based approach and Stan Kelly-Bootle’s suggestion of using 0.5 has never really
received any uptake. For languages like Java and C# that are inherently based
on signed integers they can return any negative value for the “none found”
answer. In C++ where unsigned integers are the preferred choice we have no such
luck and instead have concocted a magical value by the name of “<span
style='font-family:"Courier New"'>npos</span>” for strings which (implementation-wise)
sits within the valid range of values but on the precipice such that you’d
probably run out of memory long before it could ever be a valid result.</p>

<p class=MsoNormal>Sadly the use of -1 (in either of its signed or unsigned
guises) as both a perfectly good response to a question and as a way of
signalling an error has only succeeded in muddying the waters further. The
Windows API for example uses the constants <span style='font-family:"Courier New"'>LB_ERR</span>
(and <span style='font-family:"Courier New"'>CB_ERR</span>) in this way which
means you often stumble across code that initialises variables with it, e.g. <span
style='font-family:"Courier New"'>index = LB_ERR</span>, because it allows us
to exploit a duality of semantics (“no value, yet” and “not found”) and write
less code, irrespective of whether it makes comprehending it any easier. (You
might argue not finding it is an error; either way you still have the same type
representing two different domains – index and error.)</p>

<p class=MsoNormal>With enumerated types we often walk right into the same trap
with our eyes wide open thinking we’re being clever by adding an explicit value
called <span style='font-family:"Courier New"'>None</span> or <span
style='font-family:"Courier New"'>Default</span> (usually with a value of 0 in
languages that zero-initialise values and references for “safety’s sake”).</p>

<p class=MsoNormal>Of course when you’re forced to abuse the type system it <i>will</i>
get its own back. By masquerading two different result values within the normal
course of events you will trick the caller into believing it’s safe to simply
compose functions when in reality they’re just storing up a world of pain in
the form of an <span style='font-family:"Courier New"'>IndexOutOfBounds</span>
exception, access violation or, if really unlucky, undefined behaviour and subsequent
data corruption.</p>

<p class=MsoNormal>The <span style='font-family:"Courier New"'>NullPointerException</span>,
or “NPE” as it is commonly referred to in the Java world, is a blight on modern
programming caused in part by our use of programming languages which embrace
the use of reference types over value types meaning that all of our objects can
potentially exist or not exist. Unless the use is entirely local it can be
difficult to reason about any object’s existence and therefore null checks can easily
dominate a codebase in an act of overly defensive programming. The introduction
of the “<span style='font-family:"Courier New"'>?.</span>” operator in some
languages might reduce the noise but it’s just a case of treating the symptoms,
not the disease.</p>

<p class=MsoNormal>This particular foe likes to disguise themselves by changing
their name too, but whether they be <span style='font-family:"Courier New"'>null</span>,
<span style='font-family:"Courier New"'>NULL</span>, <span style='font-family:
"Courier New"'>nullptr</span>, <span style='font-family:"Courier New"'>nil</span>,
<span style='font-family:"Courier New"'>0</span>, <span style='font-family:
"Courier New"'>end</span>, <span style='font-family:"Courier New"'>-1</span>, <span
style='font-family:"Courier New"'>npos</span>, <span style='font-family:"Courier New"'>“”</span>,
<span style='font-family:"Courier New"'>NaN</span>, <span style='font-family:
"Courier New"'>None</span>, etc. we should be on our guard and be ready to
banish them to computing history or at the very least quarantine them.</p>

<p class=MsoNormal>But what can be done, surely we can’t undo the past? Well, maybe
we can. Over the years the awareness of the Optional (Option, Maybe, etc.) type
has grown so that it’s no longer just a niche technique used by Comp Sci
purists. The desire to right this wrong is so strong in some circles that there
is currently a preview of C# [1] where reference types have been given the <span
style='font-family:"Courier New"'>Nullable</span> makeover thereby allowing us
to finally consider deleting our own homebrew variants and deprecating our
static analysis annotations in favour of a kosher type annotation. Surprised?</p>

<p class=MsoNormal>One of Shakespeare’s most famous comedies is titled <i>Much
Ado About Nothing</i>. Given the amount of time we’ve lost over the years
debugging issues caused by our inability to express “nothing” in a way that is
obvious to our fellow programmers I’d say it was no laughing matter. We need to
realise that failure can indeed be an option and that the type system should be
there to help us, nothing more nothing less.</p>

<p class=MsoNormal> [1] <a
href="https://github.com/dotnet/csharplang/wiki/Nullable-Reference-Types-Preview">https://github.com/dotnet/csharplang/wiki/Nullable-Reference-Types-Preview</a>
</p>

<p class=MsoNormal>Chris Oldwood<br>
09 July 2018</p>

<h3><span lang=X-NONE>Biography</span></h3>

<p class=MsoNormal>Chris is a freelance programmer who started out as a bedroom
coder in the 80’s writing assembler on 8-bit micros. These days it's enterprise
grade technology in plush corporate offices. He also commentates on the
Godmanchester duck race and can be easily distracted via gort@cix.co.uk or
@chrisoldwood.</p>

</div>

</body>

</html>
